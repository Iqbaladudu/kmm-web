{% extends 'base.html' %}
{% load static %}

{% block title %}Edit Profil Mahasiswa - KMM Mesir{% endblock %}

{% block navbar %}
    {% include "navbar.html" %}
{% endblock %}

{% block sidebar %}
    {% include "sidebar.html" %}
{% endblock %}

{% block content %}
<div class="container mx-auto py-12">
    <div class="max-w-7xl mx-auto">
        <h1 class="text-4xl font-bold text-primary mb-8">Edit Profil Mahasiswa</h1>
        <p class="text-gray-500 mb-8">Silakan perbarui data mahasiswa Anda di bawah ini.</p>

        <form method="post" enctype="multipart/form-data" class="space-y-6">
            {% csrf_token %}

            <!-- Display form errors -->
            {% if form.non_field_errors %}
                <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
                    {{ form.non_field_errors }}
                </div>
            {% endif %}

            <!-- Header Section -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="col-span-1 flex flex-col items-center justify-center">
                    {% if form.photo.value %}
                        <img src="{{ form.photo.value.url }}" alt="Foto Profil" class="w-48 h-48 object-cover rounded-full border-4 border-primary shadow-lg">
                    {% else %}
                        <div class="w-48 h-48 flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 rounded-full border-4 border-primary text-gray-400 text-5xl">
                            <i class="fas fa-user"></i>
                        </div>
                    {% endif %}
                    <h2 class="text-xl font-semibold mt-4">{{ form.full_name.value|default:"Nama Lengkap" }}</h2>
                    <span class="inline-block px-3 py-1 text-xs font-medium bg-primary text-white rounded-full mt-2">{{ form.level.value|default:"Level" }}</span>
                    <div class="mt-4">
                        {{ form.photo }}
                    </div>
                </div>

                <div class="col-span-2 space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Nama Lengkap</label>
                            {{ form.full_name }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Email</label>
                            {{ form.email }}
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Nomor WhatsApp</label>
                            {{ form.whatsapp_number }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Level</label>
                            {{ form.level }}
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Tempat Lahir</label>
                            {{ form.birth_place }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Tanggal Lahir</label>
                            {{ form.birth_date }}
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Jenis Kelamin</label>
                            {{ form.gender }}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Form Sections -->
            <div class="space-y-8">
                <!-- Personal Information -->
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Data Pribadi</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Status Perkawinan</label>
                            {{ form.marital_status }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Kewarganegaraan</label>
                            {{ form.citizenship_status }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Wilayah Asal</label>
                            {{ form.region_origin }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Nama Orang Tua</label>
                            {{ form.parents_name }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Telp Orang Tua</label>
                            {{ form.parents_phone }}
                        </div>
                    </div>
                </div>

                <!-- Academic Information -->
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Data Akademis</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Institusi</label>
                            {{ form.institution }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Fakultas</label>
                            {{ form.faculty }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Jurusan</label>
                            {{ form.major }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Jenjang</label>
                            {{ form.degree_level }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Semester</label>
                            {{ form.semester_level }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Nilai Terakhir</label>
                            {{ form.latest_grade }}
                        </div>
                    </div>
                </div>

                <!-- Health History -->
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Riwayat Kesehatan</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Riwayat Penyakit</label>
                            {{ form.disease_history }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Status Penyakit</label>
                            {{ form.disease_status }}
                        </div>
                    </div>
                </div>

                <!-- Interests and Talents -->
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Minat dan Bakat</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Olahraga</label>
                            {{ form.sport_interest }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Prestasi Olahraga</label>
                            {{ form.sport_achievement }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Kesenian</label>
                            {{ form.art_interest }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Prestasi Kesenian</label>
                            {{ form.art_achievement }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Literasi</label>
                            {{ form.literacy_interest }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Prestasi Literasi</label>
                            {{ form.literacy_achievement }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Keilmuan</label>
                            {{ form.science_interest }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Prestasi Keilmuan</label>
                            {{ form.science_achievement }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">MTQ</label>
                            {{ form.mtq_interest }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Prestasi MTQ</label>
                            {{ form.mtq_achievement }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Media</label>
                            {{ form.media_interest }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Prestasi Media</label>
                            {{ form.media_achievement }}
                        </div>
                    </div>
                </div>

                <!-- Organizational History -->
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Riwayat Organisasi</h2>
                    <div class="grid grid-cols-1 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Riwayat Organisasi</label>
                            {{ form.organization_history }}
                        </div>
                    </div>
                </div>

                <!-- Financial Information -->
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Data Finansial</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Pendanaan Pendidikan</label>
                            {{ form.education_funding }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Sumber Beasiswa</label>
                            {{ form.scholarship_source }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Biaya Hidup (Bulan)</label>
                            {{ form.living_cost }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Pemasukan Bulanan</label>
                            {{ form.monthly_income }}
                        </div>
                    </div>
                </div>

                <!-- Other Identifications -->
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Identitas Lainnya</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Nomor Paspor</label>
                            {{ form.passport_number }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">NIK</label>
                            {{ form.nik }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Nomor Lapdik</label>
                            {{ form.lapdik_number }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Tanggal Kedatangan</label>
                            {{ form.arrival_date }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Asal Sekolah</label>
                            {{ form.school_origin }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Nama Asrama</label>
                            {{ form.home_name }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Lokasi Asrama</label>
                            {{ form.home_location }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Nama Umdah</label>
                            {{ form.umdah_name }}
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-600">Telp Umdah</label>
                            {{ form.umdah_phone }}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="pt-8 flex justify-end">
                <button type="submit" class="px-6 py-3 bg-primary text-white font-semibold rounded-lg shadow hover:bg-primary-dark transition">
                    Simpan Perubahan
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
